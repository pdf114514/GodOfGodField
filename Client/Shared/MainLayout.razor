@inherits LayoutComponentBase

<div class="Main">
    <div class="Header">
        <!-- TODO make wrapper div to make button's background ligher when hover -->
        <div class="ButtonCloseReference" @onclick="CloseReference" style="display: @(ShowingReference ? "inherit" : "none")">
            <div /><div />
        </div>
        <span></span>
        <!-- TODO make wrapper div to make button's background ligher when hover -->
        <div class="ButtonReference" @onclick="ToggleShowingReference">@L["texts.reference.reference"]</div>
    </div>
    <div class="Content">
        @Body
    </div>
    <div class="Footer">
        <span></span>
    </div>
</div>

@code {
    bool ShowingReference = false;

    protected override void OnInitialized() {
        Navigation.NavigateTo("/");
    }

    bool S = false;
    Random RNG = new();
    async Task ToggleShowingReference() {
        if (S) {
            var a = typeof(Resources).Assembly;
            var names = a.GetManifestResourceNames().Where(x => x.StartsWith($"{a.GetName().Name}.Resources.audio", true, null)).ToArray();
            await JS.PlayAudio(new(a.GetManifestResourceStream(names[RNG.Next(names.Length)])!));
            return;
        }
        S = true;
        await JS.PlayAudio(new(Resources.GetResource("audio.click.mp3")!));
        // ShowingReference = !ShowingReference;
        await JS.Alert("Not implemented yet");
    }

    async Task CloseReference() {
        await JS.PlayAudio(new(Resources.GetResource("audio.click.mp3")!));
        ShowingReference = false;
    }
}